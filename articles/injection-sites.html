<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Injection de nouveaux sites dans Coléo • rcoleo</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Injection de nouveaux sites dans Coléo">
<meta property="og:description" content="rcoleo">
<meta property="og:image" content="/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rcoleo</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://coleo.biodiversite-quebec.ca/docs/">
    <span class="fa fa-book fa-lg"></span>
     
  </a>
</li>
<li>
  <a></a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/telecharge-sites.html">Telecharger les sites</a>
    </li>
    <li>
      <a href="../articles/injection-taxa.html">Injecter taxa</a>
    </li>
    <li>
      <a href="../articles/tutoriel.html">Tutoriel</a>
    </li>
    <li>
      <a href="../articles/injection-sites.html">Injecter sites</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/TheoreticalEcosystemEcology/rcoleo/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="injection-sites_files/accessible-code-block-0.0.1/empty-anchor.js"></script><link href="injection-sites_files/anchor-sections-1.0/anchor-sections.css" rel="stylesheet">
<script src="injection-sites_files/anchor-sections-1.0/anchor-sections.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Injection de nouveaux sites dans Coléo</h1>
                        <h4 class="author">Claire-Cécile Juhasz</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/TheoreticalEcosystemEcology/rcoleo/blob/master/vignettes/injection-sites.Rmd"><code>vignettes/injection-sites.Rmd</code></a></small>
      <div class="hidden name"><code>injection-sites.Rmd</code></div>

    </div>

    
    
<div id="créer-une-base-de-données-excel" class="section level2">
<h2 class="hasAnchor">
<a href="#cr%C3%A9er-une-base-de-donn%C3%A9es-excel" class="anchor"></a>1. Créer une base de données excel</h2>
<p>Les colonnes de ce fichier excel doivent correspondrent aux champs contenus dans la base de données Coléo, qui sont les suivants:</p>
<ul>
<li>
<strong>cell_id</strong> : indispensable - numéro unique de chaque cellule - peut-être récupéré à l’aide de la fonction <code><a href="../reference/get_cells.html">get_cells()</a></code>
</li>
<li>
<strong>off_station_code_id</strong> : facultative - <strong>Need more information</strong>
</li>
<li>
<strong>site_code</strong> : indispensable - code alpha-numérique unique pour chaque site</li>
<li>
<strong>type</strong> : indispensable - type d’habitat où se situe le site. Les options sont : “lac”, “tourbière”, “forestier”, “rivière”, “marais”, “toundrique”, “marais côtier”</li>
<li>
<strong>opened_at</strong> : indispensable - date de création du site sous le format AAAA-MM-JJ</li>
<li>
<em>lat</em> : indispensable - latitude du site, nécessaire à la création de la varible <strong>geom</strong>
</li>
<li>
<em>lon</em> : indispensable - latitude du site, nécessaire à la création de la varible <strong>geom</strong>
</li>
<li>
<strong>notes</strong> : facultative</li>
</ul>
<p>Note:</p>
<ul>
<li>ne pas laisser de case vide, inscrire NA lorsque nécessaire</li>
<li>si vous avez des colonnes supplémentaires dans votre base de données, voir l’étape 7.8 pour qu’elles ne soient pas prises en compte lors de l’injection</li>
</ul>
</div>
<div id="corriger-la-base-de-données" class="section level2">
<h2 class="hasAnchor">
<a href="#corriger-la-base-de-donn%C3%A9es" class="anchor"></a>2. Corriger la base de données</h2>
<p>Il est très important de s’assurer que la base de données excel est sans erreur <strong>avant</strong> de l’injecter dans Coléo. Coléo n’a pas de système de correction et va prendre toutes les entrées, même si elles contiennent des erreurs. Assurez-vous également que votre base de données ne contient aucune répétition d’un même site.</p>
</div>
<div id="créer-un-projet-r" class="section level2">
<h2 class="hasAnchor">
<a href="#cr%C3%A9er-un-projet-r" class="anchor"></a>3. Créer un projet R</h2>
<p>Dans RStudio,</p>
<ul>
<li>Aller dans File &gt; New Project &gt; New Directory &gt; New Project</li>
<li>Choisir un nom de projet et un lieu dans les fichiers pour le projet</li>
</ul>
<p>Les projets permettent de travailler dans un répertoire de travail. La base de données doit donc être sauvegardée dans le même dossier que le projet afin de faire parti du répertoire de travail.</p>
</div>
<div id="sauvegarder-la-base-de-données-en-format--csv-dans-le-même-dossier-que-le-projet-r" class="section level2">
<h2 class="hasAnchor">
<a href="#sauvegarder-la-base-de-donn%C3%A9es-en-format--csv-dans-le-m%C3%AAme-dossier-que-le-projet-r" class="anchor"></a>4. Sauvegarder la base de données en format .csv dans le même dossier que le projet R</h2>
</div>
<div id="installer-les-packages-devtools-dplyr-et-rcoleo" class="section level2">
<h2 class="hasAnchor">
<a href="#installer-les-packages-devtools-dplyr-et-rcoleo" class="anchor"></a>5. Installer les packages devtools, dplyr et rcoleo</h2>
<p>Dans RStudio,</p>
<div class="sourceCode" id="cb1"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"dplyr"</span><span class="op">)</span></pre></div>
<p>pour installer le package rcoleo, il faut utiliser le packages devtools, il faut donc l’appeller avec library()</p>
<div class="sourceCode" id="cb2"><pre class="downlit">
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">devtools</span><span class="op">)</span>
<span class="fu">install_github</span><span class="op">(</span><span class="st">"RéseauBiodiversiteQuebec/rcoleo"</span><span class="op">)</span> <span class="co">#installe le package rcoleo à partir de github</span></pre></div>
</div>
<div id="mettre-en-cache-son-jeton-daccès" class="section level2">
<h2 class="hasAnchor">
<a href="#mettre-en-cache-son-jeton-dacc%C3%A8s" class="anchor"></a>6. Mettre en cache son jeton d’accès</h2>
<p>Ce jeton permet d’apporter des modifications dans Coléo. Il est unique et se retrouve dans Coléo, sous le profil de l’utilisateur dans le menu à gauche.</p>
<div class="sourceCode" id="cb3"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/base/readRDS.html">saveRDS</a></span><span class="op">(</span><span class="st">"votrejeton"</span>,<span class="st">".httr-oauth"</span><span class="op">)</span></pre></div>
<p>Cette étape n’est faite qu’une fois et permet l’enregistrement de votre jeton dans le répertoire du projet R. Une fois faite, elle est supprimée du code d’injection. Le jeton est confidentiel.</p>
</div>
<div id="injection-des-sites-dans-coléo" class="section level2">
<h2 class="hasAnchor">
<a href="#injection-des-sites-dans-col%C3%A9o" class="anchor"></a>7. Injection des sites dans Coléo</h2>
<ul>
<li>
<strong>7.1</strong> Cette étape appelle les packages installés afin qu’ils puissent être utilisés</li>
</ul>
<div class="sourceCode" id="cb4"><pre class="downlit">
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/TheoreticalEcosystemEcology/rcoleo">rcoleo</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span></pre></div>
<pre><code>## Warning: package 'dplyr' was built under R version 4.0.2</code></pre>
<ul>
<li>
<strong>7.2</strong> L’étape suivante permet d’extraire la liste des sites déjà existant dans Coléo</li>
</ul>
<div class="sourceCode" id="cb6"><pre class="downlit">
<span class="va">sites_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_sites.html">get_sites</a></span><span class="op">(</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">sites_list</span>, max.level <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>
<span class="va">all_things</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind.html">bind_rows</a></span><span class="op">(</span><span class="va">sites_list</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">body</span><span class="op">)</span></pre></div>
<ul>
<li>
<strong>7.3</strong> Cette étape permet d’enregistrer un objet dans R avec les sites à ajouter dans Coléo</li>
</ul>
<div class="sourceCode" id="cb7"><pre class="downlit">
<span class="va">corrections</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span><span class="op">(</span><span class="st">"./lenomdevotrebasededonnées.csv"</span>, header <span class="op">=</span> <span class="cn">TRUE</span>, sep <span class="op">=</span> <span class="st">','</span>, stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span>, encoding <span class="op">=</span> <span class="st">"UTF-8"</span><span class="op">)</span> <span class="co">#l'encoding UTF-8 permet de garder les accents</span></pre></div>
<div class="sourceCode" id="cb8"><pre class="downlit">
<span class="va">corrections</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span><span class="op">(</span><span class="st">"./corrections_liste_sp_JS.csv"</span>, header <span class="op">=</span> <span class="cn">TRUE</span>, sep <span class="op">=</span> <span class="st">','</span>, stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span>, encoding <span class="op">=</span> <span class="st">"UTF-8"</span><span class="op">)</span></pre></div>
<p>si votre ordinateur est en français, le séparateur de votre base de données pourrait être un ; dans ce cas, changer sep = ‘,’ pour sep = ‘;’ dans l’argument ci-haut</p>
<ul>
<li>
<strong>7.4</strong> Cette étape permet de s’assurer que les noms de colonnes sont les mêmes dans Coléo que dans votre base de données</li>
</ul>
<div class="sourceCode" id="cb9"><pre class="downlit">
<span class="fu"><a href="https://tibble.tidyverse.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="va">all_things</span><span class="op">)</span>
<span class="fu"><a href="https://tibble.tidyverse.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="va">corrections</span><span class="op">)</span></pre></div>
<p><em>NB</em> : À ce stade, il est normal que votre fichier “corrections” ne contienne pas la variable <strong>geom</strong>. Celle-ci sera créée à partir des colonnes <strong>lat</strong> &amp; <strong>lon</strong> au cours de <strong>l’étape 7.7</strong>.</p>
<ul>
<li>
<strong>7.4.1</strong> Étape facultative, elle permet de changer des noms de colonnes si ils ne sont pas écrits de la même façon que Coléo. Comme dans l’exemple ci-haut, la colonne name du fichier de corrections est écrite X.U.FEFF.name, ce qui n’est pas adéquat.</li>
</ul>
<div class="sourceCode" id="cb10"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">corrections</span><span class="op">)</span> <span class="co"># Visualisation des noms de toutes les colonnes présentes dans votre jeu de données</span>
<span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">corrections</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"name"</span> <span class="co"># Sélection du premier nom ([1]) et modification de celui-ci (&lt;- "name")</span></pre></div>
<ul>
<li>
<strong>7.5</strong> Cette étape permet de visualiser quelles entrées de la base de données se retrouvent déjà dans Coléo en fonction du code du site (<strong>site_code</strong>). Elle permet donc d’éviter les répétitions d’entrées.</li>
</ul>
<div class="sourceCode" id="cb11"><pre class="downlit">
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter-joins.html">semi_join</a></span><span class="op">(</span><span class="va">corrections</span>, <span class="va">all_things</span>, by <span class="op">=</span> <span class="st">"site_code"</span><span class="op">)</span></pre></div>
<ul>
<li>
<strong>7.6</strong> En lien avec l’étape précédente, celle-ci permet de sélectionner toutes les entrées qui ne se trouvent pas dans Coléo en fonction du nom latin afin d’éviter les répétitions.</li>
</ul>
<div class="sourceCode" id="cb12"><pre class="downlit">
<span class="va">correctionsuniques</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter-joins.html">anti_join</a></span><span class="op">(</span><span class="va">corrections</span>, <span class="va">all_things</span>, by <span class="op">=</span> <span class="st">"site_code"</span><span class="op">)</span></pre></div>
<ul>
<li>
<strong>7.7</strong> Cette étape permet de créer la colonne <strong>geom</strong>
</li>
<li>
<strong>7.7.1</strong> Conversion du dataframe en liste</li>
</ul>
<div class="sourceCode" id="cb13"><pre class="downlit">
<span class="va">correctionsuniques_ls</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/apply.html">apply</a></span><span class="op">(</span><span class="va">correctionsuniques</span>,<span class="fl">1</span>,<span class="va">as.list</span><span class="op">)</span> <span class="co"># Création de la liste</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">correctionsuniques_ls</span><span class="op">)</span> <span class="co"># Vérification de la structure de l'objet</span></pre></div>
<div class="sourceCode" id="cb14"><pre class="downlit">
<span class="co"># Creer geom points</span>
<span class="va">geom</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/apply.html">apply</a></span><span class="op">(</span><span class="va">correctionsuniques</span>,<span class="fl">1</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">{</span>
  <span class="kw">if</span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/any.html">any</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">x</span><span class="op">[</span><span class="st">"lat"</span><span class="op">]</span><span class="op">)</span>,<span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">x</span><span class="op">[</span><span class="st">"lon"</span><span class="op">]</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">{</span>
    <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="fu">geojsonio</span><span class="fu">::</span><span class="fu">geojson_list</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">x</span><span class="op">[</span><span class="st">"lon"</span><span class="op">]</span>,<span class="va">x</span><span class="op">[</span><span class="st">"lat"</span><span class="op">]</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">$</span><span class="va">features</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">geometry</span><span class="op">)</span>
  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span>
    <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="cn">NA</span><span class="op">)</span>
  <span class="op">}</span><span class="op">}</span><span class="op">)</span>

<span class="va">crs_ls</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>type<span class="op">=</span><span class="st">"name"</span>,properties<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>name<span class="op">=</span><span class="st">"EPSG:4326"</span><span class="op">)</span><span class="op">)</span>

<span class="co"># Fusionner les deux listes (geomations + sites)</span>
<span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">correctionsuniques_ls</span><span class="op">)</span><span class="op">)</span><span class="op">{</span>
  <span class="va">correctionsuniques_ls</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">geom</span> <span class="op">&lt;-</span> <span class="va">geom</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>
  <span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">is.list</a></span><span class="op">(</span><span class="va">correctionsuniques_ls</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">geom</span><span class="op">)</span><span class="op">)</span><span class="op">{</span>
    <span class="va">correctionsuniques_ls</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">geom</span><span class="op">$</span><span class="va">crs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>type<span class="op">=</span><span class="st">"name"</span>,properties<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>name<span class="op">=</span><span class="st">"EPSG:4326"</span><span class="op">)</span><span class="op">)</span>
  <span class="op">}</span>
<span class="op">}</span>


<span class="va">correctionsuniques_ls</span></pre></div>
<ul>
<li>
<strong>7.8</strong> Cette étape est seulement nécessaire si la base de données comprend des colonnes qui ne sont pas dans Coléo</li>
</ul>
<div class="sourceCode" id="cb15"><pre class="downlit">
<span class="va">correctionscol</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">correctionsuniques_ls</span>, <span class="va">cell_id</span>, <span class="va">off_station_code_id</span>, <span class="va">site_code</span>, <span class="va">type</span>, <span class="va">opened_at</span>, <span class="va">geom</span>, <span class="va">notes</span><span class="op">)</span></pre></div>
<p><strong>Cette dernière étape injecte les données de la base de données dans Coléo</strong></p>
<div class="sourceCode" id="cb16"><pre class="downlit">
<span class="fu">rcoleo</span><span class="fu">:::</span><span class="fu"><a href="../reference/post_sites.html">post_sites</a></span><span class="op">(</span><span class="va">correctionstoupload</span><span class="op">)</span></pre></div>
<p>Bravo ! Vous venez d’injecter vos nouveaux sites dans la base de données Coléo.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Steve Vissault.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.9000.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: 'API_KEY',
    indexName: 'INDEX_NAME',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
