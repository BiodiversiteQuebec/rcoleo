---
title: "Tutoriel pour injection des campagnes papillon"
author: "Claire-Cécile Juhasz"
date: "12 novembre 2020"
output: html_document
---

  ## 1. Créer une base de données excel

  Afin d'injecter des nouvelles campagnes *papillon* dans la base de données Coléo, vous devez regrouper les informations suivantes dans un fichier excel :

* **nom_cellule**
* **no_de_reference_de_la_cellule**: code numérique unique pour chaque cellule
* **no_de_reference_du_site**: code alpha-numérique unique du site
* **type_milieu**: 'lac', 'rivière', 'forestier', 'marais', 'marais côtier', 'toundrique', 'tourbière'
* **nom_lac**
* **latitude**: latitude du site d'échantillonnage
* **longitude**: longitude du site d'échantillonnage
* **date_debut**: date du début du prélèvement
* **date_fin**: date de la fin du prélèvement
* **technicien_1**
* **technicien_2**
* *heure_debut* : ?
* *heure_fin* : ?
* **temperature**
* **ciel**
* **vent**
* **nom_commun**
* **nom_scientifique**
* **abondance**
* *media* : ?
* *note*

Note : ne pas laisser de case vide, inscrire NA lorsque nécessaire

```{r, child="etape2_to_6.Rmd"}
```

## 7. Vérification pré-injection

La succession d'étape qui suivent permettent de vérifier si les cellules, les sites et les noms d'espèces associés aux campagnes à injecter existent déjà dans Coléo.

### 7.1. Création d'un objet R avec les nouvelles campagnes à insérer dans Coléo

```r
camp_zoopl <- read.csv("./lenomdevotrebasededonnées.csv", header = TRUE, sep = ',', stringsAsFactors = FALSE, encoding = "UTF-8") # l'encoding UTF-8 permet de garder les accents
```

```{r, child="etape7_partielle.Rmd"}
```

#### 7.3.4. Pour les attributs

```r
#### Variables tables "attributes" ####
rcoleo::get_gen("/attributes")
```

Vous pouvez vérifier ici si la variable `abondance` est présente dans ce tableau.

## 8. Injections des nouvelles campagnes *odonate*

Pour une injection complète d'une campagne, il est nécessaire de passer par l'importation d'informations successives dans différentes tables de Coléo. La hiérarchie des tables à renseigner est cruciale, sans quoi l'injection de la campagne est vouée à l'échec. Les prochaines étapes détaillent l'ajout d'information dans les tables:

1. Campagnes ("*/campaigns*")
2. Environnements ("*/environments*")
3. Repères ("*/landmarks*")
4. Médias ("*/media*") ?
5. Observations médias ("/obs_media") ?
6. Observations ("*/observations*")
7. Observations des espèces ("*/obs_species*")

### 8.1. Injections des informations sur les nouvelles campagnes
Les champs qui peuvent être remplis dans la table **campagnes** ("/campaigns") de Coléo sont les suivants (les champs en gras sont obligatoires) :

